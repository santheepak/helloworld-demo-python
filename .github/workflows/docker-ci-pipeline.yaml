name: docker-ci-pipeline
on: push
jobs:
  sysfooci-job:
    runs-on: ubuntu-latest
    steps:
       - name: Code Checkout
         uses: actions/checkout@v6
         
       - name: Build image
         run: docker build -t ${{ vars.DOCKER_USERNAME }}/heloworld-demo-phython:v2 .
         
       - name: verify image
         run: docker images

       - name: create container
         run: docker run --name python-app -ltd -p 8080:8080 ${{ vars.DOCKER_USERNAME }}/heloworld-demo-phython:v2
         
       - name: view container
         run: docker ps

       - name: check output
         run: curl https://localhost:8080
         
       - name: Docker Login
         uses: docker/login-action@v3.6.0
         with:
               username: ${{ vars.DOCKER_USERNAME }}
               password: ${{ secrets.DOCKER_TOCKEN }}
               
       - name: push image
         run: docker push ${{ vars.DOCKER_USERNAME }}/heloworld-demo-phython:v2
         
       - name: container cleanup
         run: docker rm python-app

    
          
